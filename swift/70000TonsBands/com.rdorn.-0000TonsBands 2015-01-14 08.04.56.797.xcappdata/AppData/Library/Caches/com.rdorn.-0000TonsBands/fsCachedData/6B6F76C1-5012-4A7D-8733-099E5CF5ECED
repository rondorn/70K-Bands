mw.loader.implement("ext.centralNotice.bannerChoiceData",function($,jQuery){mw.cnBannerControllerLib.setChoiceData([]);},{},{},{});mw.loader.implement("ext.centralNotice.bannerController.lib",function($,jQuery){(function($,mw){var bucketValidityFromServer=mw.config.get('wgNoticeNumberOfBuckets')+'.'+mw.config.get('wgNoticeNumberOfControllerBuckets');mw.cnBannerControllerLib={BUCKET_COOKIE_NAME:'centralnotice_buckets_by_campaign',choiceData:null,bucketsByCampaign:null,possibleBanners:null,setChoiceData:function(choices){this.choiceData=choices;},processBuckets:function(){var campaign,campaignName,bucket,campaignStartDate,retrievedBucketEndDate,bucketEndDate,now=new Date(),bucketsModified=false,val,extension=mw.config.get('wgCentralNoticePerCampaignBucketExtension'),i;this.retrieveBuckets();for(i=0;i<this.choiceData.length;i++){campaign=this.choiceData[i];campaignName=campaign.name;campaignStartDate=new Date();campaignStartDate.setTime(campaign.start*1000);bucketEndDate=new Date();
bucketEndDate.setTime(campaign.end*1000);bucketEndDate.setUTCDate(bucketEndDate.getUTCDate()+extension);bucket=this.bucketsByCampaign[campaignName];if(bucket&&bucketEndDate>now){retrievedBucketEndDate=new Date();retrievedBucketEndDate.setTime(bucket.end*1000);if(retrievedBucketEndDate.getTime()!==bucketEndDate.getTime()){bucket.end=bucketEndDate.getTime()/1000;bucketsModified=true;}}else{val=this.retrieveLegacyBucket();if(!val){val=this.getRandomBucket();}this.bucketsByCampaign[campaignName]={val:val,start:campaignStartDate.getTime()/1000,end:bucketEndDate.getTime()/1000};bucketsModified=true;}}for(campaignName in this.bucketsByCampaign){bucketEndDate=new Date();bucketEndDate.setTime(this.bucketsByCampaign[campaignName].end*1000);if(bucketEndDate<now){delete this.bucketsByCampaign[campaignName];bucketsModified=true;}}if(bucketsModified){this.storeBuckets();}},retrieveBuckets:function(){var cookieVal=$.cookie(this.BUCKET_COOKIE_NAME);if(cookieVal){this.bucketsByCampaign=JSON.parse(
cookieVal);}else{this.bucketsByCampaign={};}},storeBuckets:function(){var now=new Date(),latestDate,campaignName,bucketEndDate;latestDate=now;for(campaignName in this.bucketsByCampaign){bucketEndDate=new Date();bucketEndDate.setTime(this.bucketsByCampaign[campaignName].end*1000);if(bucketEndDate>latestDate){latestDate=bucketEndDate;}}latestDate.setDate(latestDate.getDate()+1);$.cookie(this.BUCKET_COOKIE_NAME,JSON.stringify(this.bucketsByCampaign),{expires:latestDate,path:'/'});},getRandomBucket:function(){return Math.floor(Math.random()*mw.config.get('wgNoticeNumberOfControllerBuckets'));},retrieveLegacyBucket:function(){var dataString=$.cookie('centralnotice_bucket')||'',bucket=dataString.split('-')[0],validity=dataString.split('-')[1];if((bucket===null)||(validity!==bucketValidityFromServer)){return null;}return bucket;},storeLegacyBucket:function(bucket){$.cookie('centralnotice_bucket',bucket+'-'+bucketValidityFromServer,{expires:mw.config.get('wgNoticeBucketExpiry'),path:'/'});},
filterChoiceData:function(){var i,campaign,j,banner,keepCampaign,filteredChoiceData=[];for(i=0;i<this.choiceData.length;i++){campaign=this.choiceData[i];keepCampaign=false;if(campaign.geotargeted&&($.inArray(mw.centralNotice.data.country,campaign.countries)===-1)){continue;}for(j=0;j<campaign.banners.length;j++){banner=campaign.banners[j];if(mw.centralNotice.data.anonymous&&!banner.display_anon){continue;}if(!mw.centralNotice.data.anonymous&&!banner.display_account){continue;}if($.inArray(mw.centralNotice.data.device,banner.devices)===-1){continue;}keepCampaign=true;}if(keepCampaign){filteredChoiceData.push(campaign);}}this.choiceData=filteredChoiceData;},makePossibleBanners:function(){var i,campaign,campaignName,j,banner;this.possibleBanners=[];for(i=0;i<this.choiceData.length;i++){campaign=this.choiceData[i];campaignName=campaign.name;for(j=0;j<campaign.banners.length;j++){banner=campaign.banners[j];if(this.bucketsByCampaign[campaignName].val%campaign.bucket_count!==banner.bucket){
continue;}if(mw.centralNotice.data.anonymous&&!banner.display_anon){continue;}if(!mw.centralNotice.data.anonymous&&!banner.display_account){continue;}if($.inArray(mw.centralNotice.data.device,banner.devices)===-1){continue;}banner.campaignName=campaignName;banner.campaignThrottle=campaign.throttle;banner.campaignZIndex=campaign.preferred;this.possibleBanners.push(banner);}}},calculateBannerAllocations:function(){var campaignTotalWeights=[],priorityTotalAllocations=[],bannersByPriority=[],priorities=[],remainingAllocation=1,i,j,banner,campaignName,campaignZIndex,priority,bannersAtThisPriority,totalAllocationAtThisPriority,scaling;for(i=0;i<this.possibleBanners.length;i++){banner=this.possibleBanners[i];campaignName=banner.campaignName;if(!campaignTotalWeights[campaignName]){campaignTotalWeights[campaignName]=0;}campaignTotalWeights[campaignName]+=banner.weight;}for(i=0;i<this.possibleBanners.length;i++){banner=this.possibleBanners[i];banner.maxAllocation=(banner.weight/
campaignTotalWeights[banner.campaignName])*(banner.campaignThrottle/100);}for(i=0;i<this.possibleBanners.length;i++){banner=this.possibleBanners[i];campaignZIndex=banner.campaignZIndex;if(!bannersByPriority[campaignZIndex]){bannersByPriority[campaignZIndex]=[];priorityTotalAllocations[campaignZIndex]=0;}bannersByPriority[campaignZIndex].push(banner);priorityTotalAllocations[campaignZIndex]+=banner.maxAllocation;}for(priority in bannersByPriority){priorities.push(priority);}priorities.sort();priorities.reverse();for(i=0;i<priorities.length;i++){bannersAtThisPriority=bannersByPriority[priorities[i]];totalAllocationAtThisPriority=priorityTotalAllocations[priorities[i]];if(remainingAllocation<=0.01){for(j=0;j<bannersAtThisPriority.length;j++){bannersAtThisPriority[j].allocation=0;}continue;}if(totalAllocationAtThisPriority>remainingAllocation){scaling=remainingAllocation/totalAllocationAtThisPriority;remainingAllocation=0;}else{scaling=1;remainingAllocation-=totalAllocationAtThisPriority;}
for(j=0;j<bannersAtThisPriority.length;j++){banner=bannersAtThisPriority[j];banner.allocation=banner.maxAllocation*scaling;}}},chooseBanner:function(random){var blockStart=0,i,banner,blockEnd;for(i=0;i<this.possibleBanners.length;i++){banner=this.possibleBanners[i];blockEnd=blockStart+banner.allocation;if((random>=blockStart)&&(random<blockEnd)){mw.centralNotice.data.banner=banner.name;mw.centralNotice.data.campaign=banner.campaignName;return;}blockStart=blockEnd;}mw.centralNotice.data.banner=null;}};})(jQuery,mediaWiki);},{},{},{});mw.loader.implement("ext.centralNotice.bannerController.mobile",function($,jQuery){(function($,mw){var rPlus=/\+/g;function decode(s){try{return decodeURIComponent(s.replace(rPlus,' '));}catch(e){return'';}}function synthesizeGeoCookie(){if(!window.Geo||!window.Geo.country){$.cookie('GeoIP','::::vx',{path:'/'});return;}var parts=[window.Geo.country,window.Geo.city.replace(/[^a-z]/i,'_'),window.Geo.lat,window.Geo.lon,(window.Geo.IP&&window.Geo.IP.match(':'))
?'v6':'v4'];$.cookie('GeoIP',parts.join(':'),{path:'/'});}window.Geo=(function(match,country,city,lat,lon,af){if(typeof country!=='string'||(country.length!==0&&country.length!==2)){$.cookie('GeoIP',null,{path:'/'});country='';city='';lat='';lon='';af='vx';}return{country:country,city:city,lat:lat&&parseFloat(lat),lon:lon&&parseFloat(lon),af:af};}).apply(null,($.cookie('GeoIP')||'').match(/([^:]*):([^:]*):([^:]*):([^:]*):([^;]*)/)||[]);mw.centralNotice={data:{getVars:{},category:'default',bucket:null,testing:false},bannerData:{},events:{},alreadyRan:false,deferredObjs:{},chooseBannerOnClient:mw.config.get('wgCentralNoticeChooseBannerOnClient')&&mw.cnBannerControllerLib&&(mw.cnBannerControllerLib.choiceData!==null),loadBanner:function(){if(mw.centralNotice.data.getVars.banner){mw.centralNotice.loadTestingBanner(mw.centralNotice.data.getVars.banner,'none','testing');}else{mw.centralNotice.loadRandomBanner();}},loadTestingBanner:function(bannerName,campaign){var bannerPageQuery;mw.
centralNotice.data.testing=true;bannerPageQuery={title:'Special:BannerLoader',banner:bannerName,campaign:campaign,uselang:mw.config.get('wgUserLanguage'),db:mw.config.get('wgDBname'),project:mw.config.get('wgNoticeProject'),country:mw.centralNotice.data.country,device:mw.centralNotice.data.device,debug:mw.centralNotice.data.getVars.debug};$.ajax({url:mw.config.get('wgCentralPagePath')+'?'+$.param(bannerPageQuery),dataType:'script',cache:true});},loadRandomBanner:function(){var fetchBannerQueryParams={uselang:mw.config.get('wgUserLanguage'),project:mw.config.get('wgNoticeProject'),anonymous:mw.config.get('wgUserName')===null,country:mw.centralNotice.data.country,device:mw.centralNotice.data.device,debug:mw.centralNotice.data.getVars.debug},scriptUrl;if(mw.centralNotice.chooseBannerOnClient){mw.cnBannerControllerLib.filterChoiceData();mw.cnBannerControllerLib.processBuckets();mw.cnBannerControllerLib.makePossibleBanners();mw.cnBannerControllerLib.calculateBannerAllocations();var random=
mw.centralNotice.data.getVars.random||Math.random();mw.cnBannerControllerLib.chooseBanner(random);if(mw.centralNotice.data.banner){fetchBannerQueryParams.banner=mw.centralNotice.data.banner;fetchBannerQueryParams.campaign=mw.centralNotice.data.campaign;scriptUrl=mw.config.get('wgCentralSelectedBannerDispatcher')+'?'+$.param(fetchBannerQueryParams);$.ajax({url:scriptUrl,dataType:'script',cache:true});}else{mw.centralNotice.insertBanner(false);}}else{var RAND_MAX=30;fetchBannerQueryParams.slot=Math.floor(Math.random()*RAND_MAX)+1;fetchBannerQueryParams.bucket=mw.centralNotice.data.bucket;scriptUrl=mw.config.get('wgCentralBannerDispatcher')+'?'+$.param(fetchBannerQueryParams);$.ajax({url:scriptUrl,dataType:'script',cache:true});}},insertBanner:function(bannerJson){window.insertBanner(bannerJson);},toggleNotice:function(){window.toggleNotice();},hideBanner:function(){window.hideBanner();},recordImpression:function(data){var url=mw.config.get('wgCentralBannerRecorder')+'?'+$.param(data);(
new Image()).src=url;},loadQueryStringVariables:function(){document.location.search.replace(/\??(?:([^=]+)=([^&]*)&?)/g,function(str,p1,p2){mw.centralNotice.data.getVars[decode(p1)]=decode(p2);});},getBucket:function(){var bucket=mw.cnBannerControllerLib.retrieveLegacyBucket();if(!bucket){bucket=mw.cnBannerControllerLib.getRandomBucket();}return bucket;},storeBucket:function(){mw.cnBannerControllerLib.storeLegacyBucket(mw.centralNotice.data.bucket);},initialize:function(){if(mw.centralNotice.alreadyRan){return;}mw.centralNotice.alreadyRan=true;mw.centralNotice.loadQueryStringVariables();mw.centralNotice.data.anonymous=(mw.config.get('wgUserName')===null);mw.centralNotice.data.country=mw.centralNotice.data.getVars.country||window.Geo.country||'XX';mw.centralNotice.data.addressFamily=(window.Geo.IPv6||window.Geo.af==='v6')?'IPv6':'IPv4';mw.centralNotice.isPreviewFrame=(mw.config.get('wgCanonicalSpecialPageName')==='BannerPreview');mw.centralNotice.data.device=mw.centralNotice.data.
getVars.device||mw.config.get('wgMobileDeviceName','desktop');if(!mw.centralNotice.chooseBannerOnClient){mw.centralNotice.data.bucket=mw.centralNotice.getBucket();}if(mw.config.get('wgNamespaceNumber')==-1&&!mw.centralNotice.isPreviewFrame){return;}mw.centralNotice.deferredObjs.bannerLoaded=$.Deferred();mw.centralNotice.events.bannerLoaded=mw.centralNotice.deferredObjs.bannerLoaded.promise();$('#siteNotice').prepend('<div id="centralNotice"></div>');if(mw.centralNotice.data.country==='XX'){$.ajax({url:'//geoiplookup.wikimedia.org/',dataType:'script',cache:true}).always(function(){if(window.Geo&&window.Geo.country){mw.centralNotice.data.country=window.Geo.country;}else{mw.centralNotice.data.country='XX';}synthesizeGeoCookie();mw.centralNotice.loadBanner();});}else{mw.centralNotice.loadBanner();}}};window.insertBanner=function(bannerJson){var url,targets,durations,cookieName,cookieVal,deleteOld,now,parsedCookie,bucket;var impressionData={country:mw.centralNotice.data.country,uselang:mw.
config.get('wgUserLanguage'),project:mw.config.get('wgNoticeProject'),db:mw.config.get('wgDBname'),anonymous:mw.centralNotice.data.anonymous,device:mw.centralNotice.data.device};if(!mw.centralNotice.chooseBannerOnClient){impressionData.bucket=mw.centralNotice.data.bucket;}var hideBanner=false;if(!bannerJson){hideBanner=true;impressionData.reason='empty';}else{impressionData.banner=bannerJson.bannerName;impressionData.campaign=bannerJson.campaign;if(!mw.centralNotice.chooseBannerOnClient){mw.centralNotice.storeBucket();}else if(!mw.centralNotice.data.getVars.banner){bucket=mw.cnBannerControllerLib.bucketsByCampaign[impressionData.campaign];impressionData.bucket=bucket.val;impressionData.bucketStart=bucket.start;impressionData.bucketEnd=bucket.end;}mw.centralNotice.data.category=encodeURIComponent(bannerJson.category);if(typeof mw.centralNotice.bannerData.preload==='function'&&!mw.centralNotice.bannerData.preload()){hideBanner=true;impressionData.reason='preload';}else if(mw.
centralNotice.data.testing===false){cookieName='centralnotice_hide_'+mw.centralNotice.data.category;cookieVal=$.cookie(cookieName);durations=mw.config.get('wgNoticeCookieDurations');now=new Date().getTime()/1000;deleteOld=(now>mw.config.get('wgNoticeOldCookieApocalypse'));if(cookieVal==='hide'&&deleteOld){$.cookie(cookieName,null,{path:'/'});}else if(cookieVal==='hide'){hideBanner=true;impressionData.reason='cookie';}else if(cookieVal!==null&&cookieVal.indexOf('{')===0){parsedCookie=JSON.parse(cookieVal);if(durations[parsedCookie.reason]&&now<parsedCookie.created+durations[parsedCookie.reason]){hideBanner=true;impressionData.reason=parsedCookie.reason;}}}if(!hideBanner){mw.centralNotice.bannerData.bannerName=bannerJson.bannerName;$('div#centralNotice').attr('class',mw.html.escape('cn-'+mw.centralNotice.data.category)).prepend('<!--googleoff: all-->'+bannerJson.bannerHtml+'<!--googleon: all-->');if(bannerJson.autolink){url=mw.config.get('wgNoticeFundraisingUrl');if((bannerJson.
landingPages!==null)&&bannerJson.landingPages.length){targets=String(bannerJson.landingPages).split(',');if($.inArray(mw.centralNotice.data.country,mw.config.get('wgNoticeXXCountries'))!==-1){mw.centralNotice.data.country='XX';}url+="?"+$.param({landing_page:targets[Math.floor(Math.random()*targets.length)].replace(/^\s+|\s+$/,''),utm_medium:'sitenotice',utm_campaign:bannerJson.campaign,utm_source:bannerJson.bannerName,language:mw.config.get('wgUserLanguage'),country:mw.centralNotice.data.country});$('#cn-landingpage-link').attr('href',url);}}var bannerShown=true;if(typeof mw.centralNotice.bannerData.alterImpressionData==='function'){bannerShown=mw.centralNotice.bannerData.alterImpressionData(impressionData);}else{impressionData.alterFunctionMissing=true;}if(!bannerShown){hideBanner=true;if(!impressionData.reason){impressionData.reason='alterImpressionData';}}}}impressionData.result=hideBanner?'hide':'show';if(!mw.centralNotice.data.testing){mw.centralNotice.recordImpression(
impressionData);}mw.centralNotice.deferredObjs.bannerLoaded.resolve(impressionData);};window.hideBanner=function(){var d=new Date(),cookieVal={v:1,created:Math.floor(d.getTime()/1000),reason:'close'},duration=mw.config.get('wgNoticeCookieDurations').close;$('#centralNotice').hide();d.setSeconds(d.getSeconds()+duration);$.cookie('centralnotice_hide_'+mw.centralNotice.data.category,JSON.stringify(cookieVal),{expires:d,path:'/'});$.each(mw.config.get('wgNoticeHideUrls'),function(idx,value){(new Image()).src=value+'?'+$.param({'duration':duration,'category':mw.centralNotice.data.category,'reason':'close'});});};window.toggleNotice=function(){window.hideBanner();};$(function(){mw.centralNotice.initialize();});})(jQuery,mediaWiki);},{"css":["@media print{#centralNotice{display:none}}\n/* cache key: enwiki:resourceloader:filter:minify-css:7:ddb0c98a055632ae8e349c9cf48ac703 */"]},{},{});mw.loader.implement("ext.centralNotice.bannerController.mobiledevice",function($,jQuery){(function(mw){var
name,ua=navigator.userAgent;if(ua.match(/iphone/i)){name='iphone';}else if(ua.match(/ipad/i)){name='ipad';}else if(ua.match(/android/i)){name='android';}else{name='unknown';}if(name){mw.config.set('wgMobileDeviceName',name);}}(mediaWiki));},{},{},{});mw.loader.implement("ext.mantle",function($,jQuery){mw.mantle={};},{},{},{});mw.loader.implement("ext.mantle.hogan",function($,jQuery){var Hogan={};(function(Hogan,useArrayBuffer){Hogan.Template=function(renderFunc,text,compiler,options){this.r=renderFunc||this.r;this.c=compiler;this.options=options;this.text=text||'';this.buf=(useArrayBuffer)?[]:'';}
Hogan.Template.prototype={r:function(context,partials,indent){return'';},v:hoganEscape,t:coerceToString,render:function render(context,partials,indent){return this.ri([context],partials||{},indent);},ri:function(context,partials,indent){return this.r(context,partials,indent);},rp:function(name,context,partials,indent){var partial=partials[name];if(!partial){return'';}if(this.c&&typeof partial=='string'){partial=this.c.compile(partial,this.options);}return partial.ri(context,partials,indent);},rs:function(context,partials,section){var tail=context[context.length-1];if(!isArray(tail)){section(context,partials,this);return;}for(var i=0;i<tail.length;i++){context.push(tail[i]);section(context,partials,this);context.pop();}},s:function(val,ctx,partials,inverted,start,end,tags){var pass;if(isArray(val)&&val.length===0){return false;}if(typeof val=='function'){val=this.ls(val,ctx,partials,inverted,start,end,tags);}pass=(val==='')||!!val;if(!inverted&&pass&&ctx){ctx.push((typeof val=='object')
?val:ctx[ctx.length-1]);}return pass;},d:function(key,ctx,partials,returnFound){var names=key.split('.'),val=this.f(names[0],ctx,partials,returnFound),cx=null;if(key==='.'&&isArray(ctx[ctx.length-2])){return ctx[ctx.length-1];}for(var i=1;i<names.length;i++){if(val&&typeof val=='object'&&names[i]in val){cx=val;val=val[names[i]];}else{val='';}}if(returnFound&&!val){return false;}if(!returnFound&&typeof val=='function'){ctx.push(cx);val=this.lv(val,ctx,partials);ctx.pop();}return val;},f:function(key,ctx,partials,returnFound){var val=false,v=null,found=false;for(var i=ctx.length-1;i>=0;i--){v=ctx[i];if(v&&typeof v=='object'&&key in v){val=v[key];found=true;break;}}if(!found){return(returnFound)?false:"";}if(!returnFound&&typeof val=='function'){val=this.lv(val,ctx,partials);}return val;},ho:function(val,cx,partials,text,tags){var compiler=this.c;var options=this.options;options.delimiters=tags;var text=val.call(cx,text);text=(text==null)?String(text):text.toString();this.b(compiler.
compile(text,options).render(cx,partials));return false;},b:(useArrayBuffer)?function(s){this.buf.push(s);}:function(s){this.buf+=s;},fl:(useArrayBuffer)?function(){var r=this.buf.join('');this.buf=[];return r;}:function(){var r=this.buf;this.buf='';return r;},ls:function(val,ctx,partials,inverted,start,end,tags){var cx=ctx[ctx.length-1],t=null;if(!inverted&&this.c&&val.length>0){return this.ho(val,cx,partials,this.text.substring(start,end),tags);}t=val.call(cx);if(typeof t=='function'){if(inverted){return true;}else if(this.c){return this.ho(t,cx,partials,this.text.substring(start,end),tags);}}return t;},lv:function(val,ctx,partials){var cx=ctx[ctx.length-1];var result=val.call(cx);if(typeof result=='function'){result=coerceToString(result.call(cx));if(this.c&&~result.indexOf("{\u007B")){return this.c.compile(result,this.options).render(cx,partials);}}return coerceToString(result);}};var rAmp=/&/g,rLt=/</g,rGt=/>/g,rApos=/\'/g,rQuot=/\"/g,hChars=/[&<>\"\']/;function coerceToString(val
){return String((val===null||val===undefined)?'':val);}function hoganEscape(str){str=coerceToString(str);return hChars.test(str)?str.replace(rAmp,'&amp;').replace(rLt,'&lt;').replace(rGt,'&gt;').replace(rApos,'&#39;').replace(rQuot,'&quot;'):str;}var isArray=Array.isArray||function(a){return Object.prototype.toString.call(a)==='[object Array]';};})(typeof exports!=='undefined'?exports:Hogan);(function(Hogan){var rIsWhitespace=/\S/,rQuot=/\"/g,rNewline=/\n/g,rCr=/\r/g,rSlash=/\\/g,tagTypes={'#':1,'^':2,'/':3,'!':4,'>':5,'<':6,'=':7,'_v':8,'{':9,'&':10};Hogan.scan=function scan(text,delimiters){var len=text.length,IN_TEXT=0,IN_TAG_TYPE=1,IN_TAG=2,state=IN_TEXT,tagType=null,tag=null,buf='',tokens=[],seenTag=false,i=0,lineStart=0,otag='{{',ctag='}}';function addBuf(){if(buf.length>0){tokens.push(new String(buf));buf='';}}function lineIsWhitespace(){var isAllWhitespace=true;for(var j=lineStart;j<tokens.length;j++){isAllWhitespace=(tokens[j].tag&&tagTypes[tokens[j].tag]<tagTypes['_v'])||(!
tokens[j].tag&&tokens[j].match(rIsWhitespace)===null);if(!isAllWhitespace){return false;}}return isAllWhitespace;}function filterLine(haveSeenTag,noNewLine){addBuf();if(haveSeenTag&&lineIsWhitespace()){for(var j=lineStart,next;j<tokens.length;j++){if(!tokens[j].tag){if((next=tokens[j+1])&&next.tag=='>'){next.indent=tokens[j].toString()}tokens.splice(j,1);}}}else if(!noNewLine){tokens.push({tag:'\n'});}seenTag=false;lineStart=tokens.length;}function changeDelimiters(text,index){var close='='+ctag,closeIndex=text.indexOf(close,index),delimiters=trim(text.substring(text.indexOf('=',index)+1,closeIndex)).split(' ');otag=delimiters[0];ctag=delimiters[1];return closeIndex+close.length-1;}if(delimiters){delimiters=delimiters.split(' ');otag=delimiters[0];ctag=delimiters[1];}for(i=0;i<len;i++){if(state==IN_TEXT){if(tagChange(otag,text,i)){--i;addBuf();state=IN_TAG_TYPE;}else{if(text.charAt(i)=='\n'){filterLine(seenTag);}else{buf+=text.charAt(i);}}}else if(state==IN_TAG_TYPE){i+=otag.length-1;
tag=tagTypes[text.charAt(i+1)];tagType=tag?text.charAt(i+1):'_v';if(tagType=='='){i=changeDelimiters(text,i);state=IN_TEXT;}else{if(tag){i++;}state=IN_TAG;}seenTag=i;}else{if(tagChange(ctag,text,i)){tokens.push({tag:tagType,n:trim(buf),otag:otag,ctag:ctag,i:(tagType=='/')?seenTag-ctag.length:i+otag.length});buf='';i+=ctag.length-1;state=IN_TEXT;if(tagType=='{'){if(ctag=='}}'){i++;}else{cleanTripleStache(tokens[tokens.length-1]);}}}else{buf+=text.charAt(i);}}}filterLine(seenTag,true);return tokens;}
function cleanTripleStache(token){if(token.n.substr(token.n.length-1)==='}'){token.n=token.n.substring(0,token.n.length-1);}}function trim(s){if(s.trim){return s.trim();}return s.replace(/^\s*|\s*$/g,'');}function tagChange(tag,text,index){if(text.charAt(index)!=tag.charAt(0)){return false;}for(var i=1,l=tag.length;i<l;i++){if(text.charAt(index+i)!=tag.charAt(i)){return false;}}return true;}function buildTree(tokens,kind,stack,customTags){var instructions=[],opener=null,token=null;while(tokens.length>0){token=tokens.shift();if(token.tag=='#'||token.tag=='^'||isOpener(token,customTags)){stack.push(token);token.nodes=buildTree(tokens,token.tag,stack,customTags);instructions.push(token);}else if(token.tag=='/'){if(stack.length===0){throw new Error('Closing tag without opener: /'+token.n);}opener=stack.pop();if(token.n!=opener.n&&!isCloser(token.n,opener.n,customTags)){throw new Error('Nesting error: '+opener.n+' vs. '+token.n);}opener.end=token.i;return instructions;}else{instructions.
push(token);}}if(stack.length>0){throw new Error('missing closing tag: '+stack.pop().n);}return instructions;}function isOpener(token,tags){for(var i=0,l=tags.length;i<l;i++){if(tags[i].o==token.n){token.tag='#';return true;}}}function isCloser(close,open,tags){for(var i=0,l=tags.length;i<l;i++){if(tags[i].c==close&&tags[i].o==open){return true;}}}Hogan.generate=function(tree,text,options){var code='var _=this;_.b(i=i||"");'+walk(tree)+'return _.fl();';if(options.asString){return'function(c,p,i){'+code+';}';}return new Hogan.Template(new Function('c','p','i',code),text,Hogan,options);}
function esc(s){return s.replace(rSlash,'\\\\').replace(rQuot,'\\\"').replace(rNewline,'\\n').replace(rCr,'\\r');}function chooseMethod(s){return(~s.indexOf('.'))?'d':'f';}function walk(tree){var code='';for(var i=0,l=tree.length;i<l;i++){var tag=tree[i].tag;if(tag=='#'){code+=section(tree[i].nodes,tree[i].n,chooseMethod(tree[i].n),tree[i].i,tree[i].end,tree[i].otag+" "+tree[i].ctag);}else if(tag=='^'){code+=invertedSection(tree[i].nodes,tree[i].n,chooseMethod(tree[i].n));}else if(tag=='<'||tag=='>'){code+=partial(tree[i]);}else if(tag=='{'||tag=='&'){code+=tripleStache(tree[i].n,chooseMethod(tree[i].n));}else if(tag=='\n'){code+=text('"\\n"'+(tree.length-1==i?'':' + i'));}else if(tag=='_v'){code+=variable(tree[i].n,chooseMethod(tree[i].n));}else if(tag===undefined){code+=text('"'+esc(tree[i])+'"');}}return code;}function section(nodes,id,method,start,end,tags){return'if(_.s(_.'+method+'("'+esc(id)+'",c,p,1),'+'c,p,0,'+start+','+end+',"'+tags+'")){'+'_.rs(c,p,'+'function(c,p,_){'+walk(
nodes)+'});c.pop();}';}function invertedSection(nodes,id,method){return'if(!_.s(_.'+method+'("'+esc(id)+'",c,p,1),c,p,1,0,0,"")){'+walk(nodes)+'};';}function partial(tok){return'_.b(_.rp("'+esc(tok.n)+'",c,p,"'+(tok.indent||'')+'"));';}function tripleStache(id,method){return'_.b(_.t(_.'+method+'("'+esc(id)+'",c,p,0)));';}function variable(id,method){return'_.b(_.v(_.'+method+'("'+esc(id)+'",c,p,0)));';}function text(id){return'_.b('+id+');';}Hogan.parse=function(tokens,text,options){options=options||{};return buildTree(tokens,'',[],options.sectionTags||[]);},Hogan.cache={};Hogan.compile=function(text,options){options=options||{};var key=text+'||'+!!options.asString;var t=this.cache[key];if(t){return t;}t=this.generate(this.parse(this.scan(text,options.delimiters),text,options),text,options);return this.cache[key]=t;};})(typeof exports!=='undefined'?exports:Hogan);(function(){var hogan={registerPartial:function(){},compile:function(src){return Hogan.compile(src);}};mw.template.
registerCompiler('hogan',hogan);}());},{},{},{});mw.loader.implement("ext.mantle.modules",function($,jQuery){(function(M,$){$.extend(M,{_modules:{},require:function(id){if(!this._modules.hasOwnProperty(id)){throw new Error('Module not found: '+id);}return this._modules[id];},define:function(id,obj){if(this._modules.hasOwnProperty(id)){throw new Error('Module already exists: '+id);}this._modules[id]=obj;}});}(mw.mantle,jQuery));},{},{},{});mw.loader.implement("ext.mantle.oo",function($,jQuery){(function(M){function extend(prototype){var Parent=this,key;function Child(){return Parent.apply(this,arguments);}OO.inheritClass(Child,Parent);for(key in prototype){Child.prototype[key]=prototype[key];}Child.extend=extend;Child.prototype._parent=Parent.prototype;return Child;}function Class(){this.initialize.apply(this,arguments);}Class.prototype.initialize=function(){};Class.extend=extend;M.define('Class',Class);}(mw.mantle));(function(M,$,OO){var Class=M.require('Class'),EventEmitter;
EventEmitter=Class.extend($.extend({initialize:OO.EventEmitter},OO.EventEmitter.prototype));M.define('eventemitter',EventEmitter);$.extend(mw.mantle,new EventEmitter());}(mw.mantle,jQuery,OO));},{},{},{});mw.loader.implement("jquery.accessKeyLabel",function($,jQuery){(function($,mw){var cachedAccessKeyPrefix,useTestPrefix=false,labelable='button, input, textarea, keygen, meter, output, progress, select';function getAccessKeyPrefix(ua){if(!ua&&cachedAccessKeyPrefix){return cachedAccessKeyPrefix;}var profile=$.client.profile(ua),accessKeyPrefix='alt-';if(profile.name==='opera'){accessKeyPrefix='shift-esc-';}else if(profile.name==='chrome'){accessKeyPrefix=(profile.platform==='mac'?'ctrl-option-':'alt-shift-');}else if(profile.platform!=='win'&&profile.name==='safari'&&profile.layoutVersion>526){accessKeyPrefix='ctrl-alt-';}else if(!(profile.platform==='win'&&profile.name==='safari')&&(profile.name==='safari'||profile.platform==='mac'||profile.name==='konqueror')){accessKeyPrefix='ctrl-';
}else if((profile.name==='firefox'||profile.name==='iceweasel')&&profile.versionBase>'1'){accessKeyPrefix='alt-shift-';}if(!ua){cachedAccessKeyPrefix=accessKeyPrefix;}return accessKeyPrefix;}function getAccessKeyLabel(element){if(!element.accessKey){return'';}if(!useTestPrefix&&element.accessKeyLabel){return element.accessKeyLabel;}return(useTestPrefix?'test-':getAccessKeyPrefix())+element.accessKey;}function updateTooltipOnElement(element,titleElement){var array=(mw.msg('word-separator')+mw.msg('brackets')).split('$1'),regexp=new RegExp($.map(array,$.escapeRE).join('.*?')+'$'),oldTitle=titleElement.title,rawTitle=oldTitle.replace(regexp,''),newTitle=rawTitle,accessKeyLabel=getAccessKeyLabel(element);if(!oldTitle){return;}if(accessKeyLabel){newTitle+=mw.msg('word-separator')+mw.msg('brackets',accessKeyLabel);}if(oldTitle!==newTitle){titleElement.title=newTitle;}}function updateTooltip(element){var id,$element,$label,$labelParent;updateTooltipOnElement(element,element);$element=$(
element);if($element.is(labelable)){id=element.id.replace(/"/g,'\\"');if(id){$label=$('label[for="'+id+'"]');if($label.length===1){updateTooltipOnElement(element,$label[0]);}}$labelParent=$element.parents('label');if($labelParent.length===1){updateTooltipOnElement(element,$labelParent[0]);}}}$.fn.updateTooltipAccessKeys=function(){return this.each(function(){updateTooltip(this);});};$.fn.updateTooltipAccessKeys.getAccessKeyPrefix=getAccessKeyPrefix;$.fn.updateTooltipAccessKeys.setTestMode=function(mode){useTestPrefix=mode;};}(jQuery,mediaWiki));},{},{"brackets":"[$1]","word-separator":" "},{});mw.loader.implement("jquery.client",function($,jQuery){(function($){var profileCache={};$.client={profile:function(nav){if(nav===undefined){nav=window.navigator;}if(profileCache[nav.userAgent+'|'+nav.platform]!==undefined){return profileCache[nav.userAgent+'|'+nav.platform];}var versionNumber,key=nav.userAgent+'|'+nav.platform,uk='unknown',x='x',wildUserAgents=['Opera','Navigator','Minefield',
'KHTML','Chrome','PLAYSTATION 3','Iceweasel'],userAgentTranslations=[[/(Firefox|MSIE|KHTML,?\slike\sGecko|Konqueror)/,''],['Chrome Safari','Chrome'],['KHTML','Konqueror'],['Minefield','Firefox'],['Navigator','Netscape'],['PLAYSTATION 3','PS3']],versionPrefixes=['camino','chrome','firefox','iceweasel','netscape','netscape6','opera','version','konqueror','lynx','msie','safari','ps3','android'],versionSuffix='(\\/|\\;?\\s|)([a-z0-9\\.\\+]*?)(\\;|dev|rel|\\)|\\s|$)',names=['camino','chrome','firefox','iceweasel','netscape','konqueror','lynx','msie','opera','safari','ipod','iphone','blackberry','ps3','rekonq','android'],nameTranslations=[],layouts=['gecko','konqueror','msie','trident','edge','opera','webkit'],layoutTranslations=[['konqueror','khtml'],['msie','trident'],['opera','presto']],layoutVersions=['applewebkit','gecko','trident','edge'],platforms=['win','wow64','mac','linux','sunos','solaris','iphone'],platformTranslations=[['sunos','solaris'],['wow64','win']],translate=function(
source,translations){var i;for(i=0;i<translations.length;i++){source=source.replace(translations[i][0],translations[i][1]);}return source;},ua=nav.userAgent,match,name=uk,layout=uk,layoutversion=uk,platform=uk,version=x;if(match=new RegExp('('+wildUserAgents.join('|')+')').exec(ua)){ua=translate(ua,userAgentTranslations);}ua=ua.toLowerCase();if(match=new RegExp('('+names.join('|')+')').exec(ua)){name=translate(match[1],nameTranslations);}if(match=new RegExp('('+layouts.join('|')+')').exec(ua)){layout=translate(match[1],layoutTranslations);}if(match=new RegExp('('+layoutVersions.join('|')+')\\\/(\\d+)').exec(ua)){layoutversion=parseInt(match[2],10);}if(match=new RegExp('('+platforms.join('|')+')').exec(nav.platform.toLowerCase())){platform=translate(match[1],platformTranslations);}if(match=new RegExp('('+versionPrefixes.join('|')+')'+versionSuffix).exec(ua)){version=match[3];}if(name==='safari'&&version>400){version='2.0';}if(name==='opera'&&version>=9.8){match=ua.match(
/\bversion\/([0-9\.]*)/);if(match&&match[1]){version=match[1];}else{version='10';}}if(name==='chrome'&&(match=ua.match(/\bopr\/([0-9\.]*)/))){if(match[1]){name='opera';version=match[1];}}if(layout==='trident'&&layoutversion>=7&&(match=ua.match(/\brv[ :\/]([0-9\.]*)/))){if(match[1]){name='msie';version=match[1];}}if(name==='chrome'&&(match=ua.match(/\bedge\/([0-9\.]*)/))){name='msie';version=match[1];layout='edge';layoutversion=parseInt(match[1],10);}if(match=ua.match(/\bsilk\/([0-9.\-_]*)/)){if(match[1]){name='silk';version=match[1];}}versionNumber=parseFloat(version,10)||0.0;return profileCache[key]={name:name,layout:layout,layoutVersion:layoutversion,platform:platform,version:version,versionBase:(version!==x?Math.floor(versionNumber).toString():x),versionNumber:versionNumber};},test:function(map,profile,exactMatchOnly){var conditions,dir,i,op,val,j,pieceVersion,pieceVal,compare;profile=$.isPlainObject(profile)?profile:$.client.profile();if(map.ltr&&map.rtl){dir=$('body').is('.rtl')?
'rtl':'ltr';map=map[dir];}if(typeof map!=='object'||map[profile.name]===undefined){return!exactMatchOnly;}conditions=map[profile.name];if(conditions===false){return false;}if(conditions===null){return true;}for(i=0;i<conditions.length;i++){op=conditions[i][0];val=conditions[i][1];if(typeof val==='string'){pieceVersion=profile.version.toString().split('.');pieceVal=val.split('.');while(pieceVersion.length<pieceVal.length){pieceVersion.push('0');}while(pieceVal.length<pieceVersion.length){pieceVal.push('0');}compare=0;for(j=0;j<pieceVersion.length;j++){if(Number(pieceVersion[j])<Number(pieceVal[j])){compare=-1;break;}else if(Number(pieceVersion[j])>Number(pieceVal[j])){compare=1;break;}}if(!(eval(''+compare+op+'0'))){return false;}}else if(typeof val==='number'){if(!(eval('profile.versionNumber'+op+val))){return false;}}}return true;}};}(jQuery));},{},{},{});mw.loader.implement("jquery.cookie",function($,jQuery){(function($,document,undefined){var pluses=/\+/g;function raw(s){return s;}
function decoded(s){return unRfc2068(decodeURIComponent(s.replace(pluses,' ')));}function unRfc2068(value){if(value.indexOf('"')===0){value=value.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}return value;}function fromJSON(value){return config.json?JSON.parse(value):value;}var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(value===null){options.expires=-1;}if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}value=config.json?JSON.stringify(value):String(value);return(document.cookie=[encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');var result=key?null:{};for(var i=
0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=decode(parts.join('='));if(key&&key===name){result=fromJSON(cookie);break;}if(!key){result[name]=fromJSON(cookie);}}return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==null){$.cookie(key,null,options);return true;}return false;};})(jQuery,document);},{},{},{});mw.loader.implement("jquery.mwExtension",function($,jQuery){(function($){$.extend({trimLeft:function(str){return str===null?'':str.toString().replace(/^\s+/,'');},trimRight:function(str){return str===null?'':str.toString().replace(/\s+$/,'');},ucFirst:function(str){return str.charAt(0).toUpperCase()+str.slice(1);},escapeRE:function(str){return str.replace(/([\\{}()|.?*+\-\^$\[\]])/g,'\\$1');},isDomElement:function(el){return!!el&&!!el.nodeType;},isEmpty:function(v){var key;if(v===''||v===0||v==='0'||v===null||v===false||v===undefined){return true;}if(v.length===0){return true;}if(typeof v===
'object'){for(key in v){return false;}return true;}return false;},compareArray:function(arrThis,arrAgainst){if(arrThis.length!==arrAgainst.length){return false;}for(var i=0;i<arrThis.length;i++){if($.isArray(arrThis[i])){if(!$.compareArray(arrThis[i],arrAgainst[i])){return false;}}else if(arrThis[i]!==arrAgainst[i]){return false;}}return true;},compareObject:function(objectA,objectB){var prop,type;if(typeof objectA===typeof objectB){if(typeof objectA==='object'){if(objectA===objectB){return true;}else{for(prop in objectA){if(prop in objectB){type=typeof objectA[prop];if(type===typeof objectB[prop]){switch(type){case'object':if(!$.compareObject(objectA[prop],objectB[prop])){return false;}break;case'function':if(objectA[prop].toString()!==objectB[prop].toString()){return false;}break;default:if(objectA[prop]!==objectB[prop]){return false;}break;}}else{return false;}}else{return false;}}for(prop in objectB){if(!(prop in objectA)){return false;}}}}}else{return false;}return true;}});}(
jQuery));},{},{},{});mw.loader.implement("mediawiki.cldr",function($,jQuery){(function(mw){'use strict';mw.cldr={getPluralForm:function(number,pluralRules){var i;for(i=0;i<pluralRules.length;i++){if(mw.libs.pluralRuleParser(pluralRules[i],number)){break;}}return i;}};}(mediaWiki));},{},{},{});mw.loader.implement("mediawiki.jqueryMsg",function($,jQuery){(function(mw,$){var oldParser,slice=Array.prototype.slice,parserDefaults={magic:{'SITENAME':mw.config.get('wgSiteName')},allowedHtmlElements:['b','i'],allowedHtmlCommonAttributes:['id','class','style','lang','dir','title','role'],allowedHtmlAttributesByElement:{},messages:mw.messages,language:mw.language,format:'parse'};function appendWithoutParsing($parent,children){var i,len;if(!$.isArray(children)){children=[children];}for(i=0,len=children.length;i<len;i++){if(typeof children[i]!=='object'){children[i]=document.createTextNode(children[i]);}}return $parent.append(children);}function decodePrimaryHtmlEntities(encoded){return encoded.
replace(/&#039;/g,'\'').replace(/&quot;/g,'"').replace(/&lt;/g,'<').replace(/&gt;/g,'>').replace(/&amp;/g,'&');}function getFailableParserFn(options){var parser=new mw.jqueryMsg.parser(options);return function(args){var fallback,key=args[0],argsArray=$.isArray(args[1])?args[1]:slice.call(args,1);try{return parser.parse(key,argsArray);}catch(e){fallback=parser.settings.messages.get(key);mw.log.warn('mediawiki.jqueryMsg: '+key+': '+e.message);return $('<span>').text(fallback);}};}mw.jqueryMsg={};mw.jqueryMsg.getMessageFunction=function(options){var failableParserFn=getFailableParserFn(options),format;if(options&&options.format!==undefined){format=options.format;}else{format=parserDefaults.format;}return function(){var failableResult=failableParserFn(arguments);if(format==='text'||format==='escaped'){return failableResult.text();}else{return failableResult.html();}};};mw.jqueryMsg.getPlugin=function(options){var failableParserFn=getFailableParserFn(options);return function(){var $target=
this.empty();$.each(failableParserFn(arguments).contents(),function(i,node){appendWithoutParsing($target,node);});return $target;};};mw.jqueryMsg.parser=function(options){this.settings=$.extend({},parserDefaults,options);this.settings.onlyCurlyBraceTransform=(this.settings.format==='text'||this.settings.format==='escaped');this.emitter=new mw.jqueryMsg.htmlEmitter(this.settings.language,this.settings.magic);};mw.jqueryMsg.parser.prototype={astCache:{},parse:function(key,replacements){return this.emitter.emit(this.getAst(key),replacements);},getAst:function(key){var cacheKey=[key,this.settings.onlyCurlyBraceTransform].join(':'),wikiText;if(this.astCache[cacheKey]===undefined){wikiText=this.settings.messages.get(key);if(typeof wikiText!=='string'){wikiText='\\['+key+'\\]';}this.astCache[cacheKey]=this.wikiTextToAst(wikiText);}return this.astCache[cacheKey];},wikiTextToAst:function(input){var pos,settings=this.settings,concat=Array.prototype.concat,regularLiteral,regularLiteralWithoutBar,
regularLiteralWithoutSpace,regularLiteralWithSquareBrackets,doubleQuote,singleQuote,backslash,anyCharacter,asciiAlphabetLiteral,escapedOrLiteralWithoutSpace,escapedOrLiteralWithoutBar,escapedOrRegularLiteral,whitespace,dollar,digits,htmlDoubleQuoteAttributeValue,htmlSingleQuoteAttributeValue,htmlAttributeEquals,openHtmlStartTag,optionalForwardSlash,openHtmlEndTag,closeHtmlTag,openExtlink,closeExtlink,wikilinkPage,wikilinkContents,openWikilink,closeWikilink,templateName,pipe,colon,templateContents,openTemplate,closeTemplate,nonWhitespaceExpression,paramExpression,expression,curlyBraceTransformExpression,result;pos=0;function choice(ps){return function(){var i,result;for(i=0;i<ps.length;i++){result=ps[i]();if(result!==null){return result;}}return null;};}function sequence(ps){var i,res,originalPos=pos,result=[];for(i=0;i<ps.length;i++){res=ps[i]();if(res===null){pos=originalPos;return null;}result.push(res);}return result;}function nOrMore(n,p){return function(){var originalPos=pos,
result=[],parsed=p();while(parsed!==null){result.push(parsed);parsed=p();}if(result.length<n){pos=originalPos;return null;}return result;};}function transform(p,fn){return function(){var result=p();return result===null?null:fn(result);};}function makeStringParser(s){var len=s.length;return function(){var result=null;if(input.substr(pos,len)===s){result=s;pos+=len;}return result;};}function makeRegexParser(regex){return function(){var matches=input.slice(pos).match(regex);if(matches===null){return null;}pos+=matches[0].length;return matches[0];};}regularLiteral=makeRegexParser(/^[^{}\[\]$<\\]/);regularLiteralWithoutBar=makeRegexParser(/^[^{}\[\]$\\|]/);regularLiteralWithoutSpace=makeRegexParser(/^[^{}\[\]$\s]/);regularLiteralWithSquareBrackets=makeRegexParser(/^[^{}$\\]/);backslash=makeStringParser('\\');doubleQuote=makeStringParser('"');singleQuote=makeStringParser('\'');anyCharacter=makeRegexParser(/^./);openHtmlStartTag=makeStringParser('<');optionalForwardSlash=makeRegexParser(
/^\/?/);openHtmlEndTag=makeStringParser('</');htmlAttributeEquals=makeRegexParser(/^\s*=\s*/);closeHtmlTag=makeRegexParser(/^\s*>/);function escapedLiteral(){var result=sequence([backslash,anyCharacter]);return result===null?null:result[1];}escapedOrLiteralWithoutSpace=choice([escapedLiteral,regularLiteralWithoutSpace]);escapedOrLiteralWithoutBar=choice([escapedLiteral,regularLiteralWithoutBar]);escapedOrRegularLiteral=choice([escapedLiteral,regularLiteral]);function literalWithoutSpace(){var result=nOrMore(1,escapedOrLiteralWithoutSpace)();return result===null?null:result.join('');}function literalWithoutBar(){var result=nOrMore(1,escapedOrLiteralWithoutBar)();return result===null?null:result.join('');}function unescapedLiteralWithoutBar(){var result=nOrMore(1,regularLiteralWithoutBar)();return result===null?null:result.join('');}function literal(){var result=nOrMore(1,escapedOrRegularLiteral)();return result===null?null:result.join('');}function curlyBraceTransformExpressionLiteral()
{var result=nOrMore(1,regularLiteralWithSquareBrackets)();return result===null?null:result.join('');}asciiAlphabetLiteral=makeRegexParser(/[A-Za-z]+/);htmlDoubleQuoteAttributeValue=makeRegexParser(/^[^"]*/);htmlSingleQuoteAttributeValue=makeRegexParser(/^[^']*/);whitespace=makeRegexParser(/^\s+/);dollar=makeStringParser('$');digits=makeRegexParser(/^\d+/);function replacement(){var result=sequence([dollar,digits]);if(result===null){return null;}return['REPLACE',parseInt(result[1],10)-1];}openExtlink=makeStringParser('[');closeExtlink=makeStringParser(']');function extlink(){var result,parsedResult;result=null;parsedResult=sequence([openExtlink,nonWhitespaceExpression,whitespace,nOrMore(1,expression),closeExtlink]);if(parsedResult!==null){result=['EXTLINK',parsedResult[1]];if(parsedResult[3].length===1){result.push(parsedResult[3][0]);}else{result.push(['CONCAT'].concat(parsedResult[3]));}}return result;}function extLinkParam(){var result=sequence([openExtlink,dollar,digits,whitespace,
expression,closeExtlink]);if(result===null){return null;}return['EXTLINKPARAM',parseInt(result[2],10)-1,result[4]];}openWikilink=makeStringParser('[[');closeWikilink=makeStringParser(']]');pipe=makeStringParser('|');function template(){var result=sequence([openTemplate,templateContents,closeTemplate]);return result===null?null:result[1];}wikilinkPage=choice([unescapedLiteralWithoutBar,template]);function pipedWikilink(){var result=sequence([wikilinkPage,pipe,expression]);return result===null?null:[result[0],result[2]];}wikilinkContents=choice([pipedWikilink,wikilinkPage]);function wikilink(){var result,parsedResult,parsedLinkContents;result=null;parsedResult=sequence([openWikilink,wikilinkContents,closeWikilink]);if(parsedResult!==null){parsedLinkContents=parsedResult[1];result=['WIKILINK'].concat(parsedLinkContents);}return result;}function doubleQuotedHtmlAttributeValue(){var parsedResult=sequence([doubleQuote,htmlDoubleQuoteAttributeValue,doubleQuote]);return parsedResult===null?
null:parsedResult[1];}function singleQuotedHtmlAttributeValue(){var parsedResult=sequence([singleQuote,htmlSingleQuoteAttributeValue,singleQuote]);return parsedResult===null?null:parsedResult[1];}function htmlAttribute(){var parsedResult=sequence([whitespace,asciiAlphabetLiteral,htmlAttributeEquals,choice([doubleQuotedHtmlAttributeValue,singleQuotedHtmlAttributeValue])]);return parsedResult===null?null:[parsedResult[1],parsedResult[3]];}function isAllowedHtml(startTagName,endTagName,attributes){var i,len,attributeName;startTagName=startTagName.toLowerCase();endTagName=endTagName.toLowerCase();if(startTagName!==endTagName||$.inArray(startTagName,settings.allowedHtmlElements)===-1){return false;}for(i=0,len=attributes.length;i<len;i+=2){attributeName=attributes[i];if($.inArray(attributeName,settings.allowedHtmlCommonAttributes)===-1&&$.inArray(attributeName,settings.allowedHtmlAttributesByElement[startTagName]||[])===-1){return false;}}return true;}function htmlAttributes(){var
parsedResult=nOrMore(0,htmlAttribute)();return concat.apply(['HTMLATTRIBUTES'],parsedResult);}function html(){var result=null,parsedOpenTagResult,parsedHtmlContents,parsedCloseTagResult,wrappedAttributes,attributes,startTagName,endTagName,startOpenTagPos,startCloseTagPos,endOpenTagPos,endCloseTagPos;startOpenTagPos=pos;parsedOpenTagResult=sequence([openHtmlStartTag,asciiAlphabetLiteral,htmlAttributes,optionalForwardSlash,closeHtmlTag]);if(parsedOpenTagResult===null){return null;}endOpenTagPos=pos;startTagName=parsedOpenTagResult[1];parsedHtmlContents=nOrMore(0,expression)();startCloseTagPos=pos;parsedCloseTagResult=sequence([openHtmlEndTag,asciiAlphabetLiteral,closeHtmlTag]);if(parsedCloseTagResult===null){return['CONCAT',input.slice(startOpenTagPos,endOpenTagPos)].concat(parsedHtmlContents);}endCloseTagPos=pos;endTagName=parsedCloseTagResult[1];wrappedAttributes=parsedOpenTagResult[2];attributes=wrappedAttributes.slice(1);if(isAllowedHtml(startTagName,endTagName,attributes)){result=[
'HTMLELEMENT',startTagName,wrappedAttributes].concat(parsedHtmlContents);}else{result=['CONCAT',input.slice(startOpenTagPos,endOpenTagPos)].concat(parsedHtmlContents,input.slice(startCloseTagPos,endCloseTagPos));}return result;}templateName=transform(makeRegexParser(/^[ !"$&'()*,.\/0-9;=?@A-Z\^_`a-z~\x80-\xFF+\-]+/),function(result){return result.toString();});function templateParam(){var expr,result;result=sequence([pipe,nOrMore(0,paramExpression)]);if(result===null){return null;}expr=result[1];return expr.length>1?['CONCAT'].concat(expr):expr[0];}function templateWithReplacement(){var result=sequence([templateName,colon,replacement]);return result===null?null:[result[0],result[2]];}function templateWithOutReplacement(){var result=sequence([templateName,colon,paramExpression]);return result===null?null:[result[0],result[2]];}function templateWithOutFirstParameter(){var result=sequence([templateName,colon]);return result===null?null:[result[0],''];}colon=makeStringParser(':');
templateContents=choice([function(){var res=sequence([choice([templateWithReplacement,templateWithOutReplacement,templateWithOutFirstParameter]),nOrMore(0,templateParam)]);return res===null?null:res[0].concat(res[1]);},function(){var res=sequence([templateName,nOrMore(0,templateParam)]);if(res===null){return null;}return[res[0]].concat(res[1]);}]);openTemplate=makeStringParser('{{');closeTemplate=makeStringParser('}}');nonWhitespaceExpression=choice([template,wikilink,extLinkParam,extlink,replacement,literalWithoutSpace]);paramExpression=choice([template,wikilink,extLinkParam,extlink,replacement,literalWithoutBar]);expression=choice([template,wikilink,extLinkParam,extlink,replacement,html,literal]);curlyBraceTransformExpression=choice([template,replacement,curlyBraceTransformExpressionLiteral]);function start(rootExpression){var result=nOrMore(0,rootExpression)();if(result===null){return null;}return['CONCAT'].concat(result);}result=start(this.settings.onlyCurlyBraceTransform?
curlyBraceTransformExpression:expression);if(result===null||pos!==input.length){throw new Error('Parse error at position '+pos.toString()+' in input: '+input);}return result;}};mw.jqueryMsg.htmlEmitter=function(language,magic){this.language=language;var jmsg=this;$.each(magic,function(key,val){jmsg[key.toLowerCase()]=function(){return val;};});this.emit=function(node,replacements){var ret,subnodes,operation,jmsg=this;switch(typeof node){case'string':case'number':ret=node;break;case'object':subnodes=$.map(node.slice(1),function(n){return jmsg.emit(n,replacements);});operation=node[0].toLowerCase();if(typeof jmsg[operation]==='function'){ret=jmsg[operation](subnodes,replacements);}else{throw new Error('Unknown operation "'+operation+'"');}break;case'undefined':ret='';break;default:throw new Error('Unexpected type in AST: '+typeof node);}return ret;};};mw.jqueryMsg.htmlEmitter.prototype={concat:function(nodes){var $span=$('<span>').addClass('mediaWiki_htmlEmitter');$.each(nodes,function(i
,node){if(node instanceof jQuery&&node.hasClass('mediaWiki_htmlEmitter')){$.each(node.contents(),function(j,childNode){appendWithoutParsing($span,childNode);});}else{appendWithoutParsing($span,node);}});return $span;},replace:function(nodes,replacements){var index=parseInt(nodes[0],10);if(index<replacements.length){return replacements[index];}else{return'$'+(index+1);}},wikilink:function(nodes){var page,anchor,url;page=nodes[0];url=mw.util.getUrl(page);if(nodes.length===1){anchor=page;}else{anchor=nodes[1];}return $('<a>').attr({title:page,href:url}).text(anchor);},htmlattributes:function(nodes){var i,len,mapping={};for(i=0,len=nodes.length;i<len;i+=2){mapping[nodes[i]]=decodePrimaryHtmlEntities(nodes[i+1]);}return mapping;},htmlelement:function(nodes){var tagName,attributes,contents,$element;tagName=nodes.shift();attributes=nodes.shift();contents=nodes;$element=$(document.createElement(tagName)).attr(attributes);return appendWithoutParsing($element,contents);},extlink:function(nodes){
var $el,arg=nodes[0],contents=nodes[1];if(arg instanceof jQuery){$el=arg;}else{$el=$('<a>');if(typeof arg==='function'){$el.attr('href','#').click(function(e){e.preventDefault();}).click(arg);}else{$el.attr('href',arg.toString());}}return appendWithoutParsing($el,contents);},extlinkparam:function(nodes,replacements){var replacement,index=parseInt(nodes[0],10);if(index<replacements.length){replacement=replacements[index];}else{replacement='$'+(index+1);}return this.extlink([replacement,nodes[1]]);},plural:function(nodes){var forms,firstChild,firstChildText,explicitPluralForms={},explicitPluralFormNumber,formIndex,form,count;count=parseFloat(this.language.convertNumber(nodes[0],true));forms=nodes.slice(1);for(formIndex=0;formIndex<forms.length;formIndex++){form=forms[formIndex];if(form.jquery&&form.hasClass('mediaWiki_htmlEmitter')){firstChild=form.contents().get(0);if(firstChild&&firstChild.nodeType===Node.TEXT_NODE){firstChildText=firstChild.textContent;if(/^\d+=/.test(firstChildText))
{explicitPluralFormNumber=parseInt(firstChildText.split(/=/)[0],10);firstChild.textContent=firstChildText.slice(firstChildText.indexOf('=')+1);explicitPluralForms[explicitPluralFormNumber]=form;forms[formIndex]=undefined;}}}else if(/^\d+=/.test(form)){explicitPluralFormNumber=parseInt(form.split(/=/)[0],10);explicitPluralForms[explicitPluralFormNumber]=form.slice(form.indexOf('=')+1);forms[formIndex]=undefined;}}forms=$.map(forms,function(form){return form;});return this.language.convertPlural(count,forms,explicitPluralForms);},gender:function(nodes){var gender,maybeUser=nodes[0],forms=nodes.slice(1);if(maybeUser===''){maybeUser=mw.user;}if(maybeUser&&maybeUser.options instanceof mw.Map){gender=maybeUser.options.get('gender');}else{gender=maybeUser;}return this.language.gender(gender,forms);},grammar:function(nodes){var form=nodes[0],word=nodes[1];return word&&form&&this.language.convertGrammar(word,form);},'int':function(nodes){return mw.jqueryMsg.getMessageFunction()(nodes[0].
toLowerCase());},formatnum:function(nodes){var isInteger=(nodes[1]&&nodes[1]==='R')?true:false,number=nodes[0];return this.language.convertNumber(number,isInteger);}};mw.log.deprecate(window,'gM',mw.jqueryMsg.getMessageFunction(),'Use mw.message( ... ).parse() instead.');$.fn.msg=mw.jqueryMsg.getPlugin();oldParser=mw.Message.prototype.parser;mw.Message.prototype.parser=function(){var messageFunction;if(this.format==='plain'||!/\{\{|[\[<>]/.test(this.map.get(this.key))){return oldParser.apply(this);}messageFunction=mw.jqueryMsg.getMessageFunction({'messages':this.map,'format':this.format});return messageFunction(this.key,this.parameters);};}(mediaWiki,jQuery));},{},{},{});mw.loader.implement("mediawiki.language",function($,jQuery){(function(mw,$){$.extend(mw.language,{procPLURAL:function(template){if(template.title&&template.parameters&&mw.language.convertPlural){if(template.parameters.length===0){return'';}var count=mw.language.convertNumber(template.title,true);return mw.language.
convertPlural(parseInt(count,10),template.parameters);}if(template.parameters[0]){return template.parameters[0];}return'';},convertPlural:function(count,forms,explicitPluralForms){var pluralRules,pluralFormIndex=0;if(explicitPluralForms&&explicitPluralForms[count]){return explicitPluralForms[count];}if(!forms||forms.length===0){return'';}pluralRules=mw.language.getData(mw.config.get('wgUserLanguage'),'pluralRules');if(!pluralRules){return(count===1)?forms[0]:forms[1];}pluralFormIndex=mw.cldr.getPluralForm(count,pluralRules);pluralFormIndex=Math.min(pluralFormIndex,forms.length-1);return forms[pluralFormIndex];},preConvertPlural:function(forms,count){while(forms.length<count){forms.push(forms[forms.length-1]);}return forms;},gender:function(gender,forms){if(!forms||forms.length===0){return'';}forms=mw.language.preConvertPlural(forms,2);if(gender==='male'){return forms[0];}if(gender==='female'){return forms[1];}return(forms.length===3)?forms[2]:forms[0];},convertGrammar:function(word,
form){var grammarForms=mw.language.getData(mw.config.get('wgUserLanguage'),'grammarForms');if(grammarForms&&grammarForms[form]){return grammarForms[form][word]||word;}return word;},listToText:function(list){var text='',i=0;for(;i<list.length;i++){text+=list[i];if(list.length-2===i){text+=mw.msg('and')+mw.msg('word-separator');}else if(list.length-1!==i){text+=mw.msg('comma-separator');}}return text;}});}(mediaWiki,jQuery));(function(mw,$){function pad(text,size,ch,end){if(!ch){ch='0';}var out=String(text),padStr=replicate(ch,Math.ceil((size-out.length)/ch.length));return end?out+padStr:padStr+out;}function replicate(str,num){if(num<=0||!str){return'';}var buf=[];while(num--){buf.push(str);}return buf.join('');}function commafyNumber(value,pattern,options){options=options||{group:',',decimal:'.'};if(isNaN(value)){return value;}var padLength,patternDigits,index,whole,off,remainder,patternParts=pattern.split('.'),maxPlaces=(patternParts[1]||[]).length,valueParts=String(Math.abs(value)).
split('.'),fractional=valueParts[1]||'',groupSize=0,groupSize2=0,pieces=[];if(patternParts[1]){padLength=(patternParts[1]&&patternParts[1].lastIndexOf('0')+1);if(padLength>fractional.length){valueParts[1]=pad(fractional,padLength,'0',true);}if(maxPlaces<fractional.length){valueParts[1]=fractional.slice(0,maxPlaces);}}else{if(valueParts[1]){valueParts.pop();}}patternDigits=patternParts[0].replace(',','');padLength=patternDigits.indexOf('0');if(padLength!==-1){padLength=patternDigits.length-padLength;if(padLength>valueParts[0].length){valueParts[0]=pad(valueParts[0],padLength);}if(patternDigits.indexOf('#')===-1){valueParts[0]=valueParts[0].slice(valueParts[0].length-padLength);}}index=patternParts[0].lastIndexOf(',');if(index!==-1){groupSize=patternParts[0].length-index-1;remainder=patternParts[0].slice(0,index);index=remainder.lastIndexOf(',');if(index!==-1){groupSize2=remainder.length-index-1;}}for(whole=valueParts[0];whole;){off=groupSize?whole.length-groupSize:0;pieces.push((off>0)?
whole.slice(off):whole);whole=(off>0)?whole.slice(0,off):'';if(groupSize2){groupSize=groupSize2;groupSize2=null;}}valueParts[0]=pieces.reverse().join(options.group);return valueParts.join(options.decimal);}$.extend(mw.language,{convertNumber:function(num,integer){var i,tmp,transformTable,numberString,convertedNumber,pattern;pattern=mw.language.getData(mw.config.get('wgUserLanguage'),'digitGroupingPattern')||'#,##0.###';transformTable=mw.language.getDigitTransformTable();if(!transformTable){return num;}if(integer){if(parseInt(num,10)===num){return num;}tmp=[];for(i in transformTable){tmp[transformTable[i]]=i;}transformTable=tmp;numberString=num+'';}else{numberString=mw.language.commafy(num,pattern);}convertedNumber='';for(i=0;i<numberString.length;i++){if(transformTable[numberString[i]]){convertedNumber+=transformTable[numberString[i]];}else{convertedNumber+=numberString[i];}}return integer?parseInt(convertedNumber,10):convertedNumber;},getDigitTransformTable:function(){return mw.
language.getData(mw.config.get('wgUserLanguage'),'digitTransformTable')||[];},getSeparatorTransformTable:function(){return mw.language.getData(mw.config.get('wgUserLanguage'),'separatorTransformTable')||[];},commafy:function(value,pattern){var numberPattern,transformTable=mw.language.getSeparatorTransformTable(),group=transformTable[',']||',',numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,decimal=transformTable['.']||'.',patternList=pattern.split(';'),positivePattern=patternList[0];pattern=patternList[(value<0)?1:0]||('-'+positivePattern);numberPattern=positivePattern.match(numberPatternRE);if(!numberPattern){throw new Error('unable to find a number expression in pattern: '+pattern);}return pattern.replace(numberPatternRE,commafyNumber(value,numberPattern[0],{decimal:decimal,group:group}));}});}(mediaWiki,jQuery));(function(mw,$){$.extend(mw.language,{getFallbackLanguages:function(){return mw.language.getData(mw.config.get('wgUserLanguage'),'fallbackLanguages')||[];},getFallbackLanguageChain:
function(){return[mw.config.get('wgUserLanguage')].concat(mw.language.getFallbackLanguages());}});}(mediaWiki,jQuery));},{},{"and":" and","comma-separator":", ","word-separator":" "},{});mw.loader.implement("mediawiki.notify",function($,jQuery){(function(mw){'use strict';mw.notify=function(message,options){return mw.loader.using('mediawiki.notification').then(function(){return mw.notification.notify(message,options);});};}(mediaWiki));},{},{},{});mw.loader.implement("mediawiki.template",function($,jQuery){(function(mw,$){var compiledTemplates={},compilers={};mw.template={registerCompiler:function(name,compiler){if(!compiler.compile){throw new Error('Compiler must implement compile method.');}compilers[name]=compiler;},getCompilerName:function(templateName){var templateParts=templateName.split('.');if(templateParts.length<2){throw new Error('Unable to identify compiler. Template name must have a suffix.');}return templateParts[templateParts.length-1];},getCompiler:function(compilerName)
{var compiler=compilers[compilerName];if(!compiler){throw new Error('Unknown compiler '+compilerName);}return compiler;},add:function(moduleName,templateName,templateBody){var compiledTemplate,compilerName=this.getCompilerName(templateName);if(!compiledTemplates[moduleName]){compiledTemplates[moduleName]={};}compiledTemplate=this.compile(templateBody,compilerName);compiledTemplates[moduleName][templateName]=compiledTemplate;return compiledTemplate;},get:function(moduleName,templateName){var moduleTemplates,compiledTemplate;if(!compiledTemplates[moduleName]||!compiledTemplates[moduleName][templateName]){moduleTemplates=mw.templates.get(moduleName);if(!moduleTemplates||!moduleTemplates[templateName]){throw new Error('Template '+templateName+' not found in module '+moduleName);}compiledTemplate=this.add(moduleName,templateName,moduleTemplates[templateName]);}else{compiledTemplate=compiledTemplates[moduleName][templateName];}return compiledTemplate;},compile:function(templateBody,
compilerName){return this.getCompiler(compilerName).compile(templateBody);}};mw.template.registerCompiler('html',{compile:function(src){return{render:function(){return $($.parseHTML($.trim(src)));}};}});}(mediaWiki,jQuery));},{},{},{});mw.loader.implement("mediawiki.util",function($,jQuery){(function(mw,$){'use strict';var util={init:function(){util.$content=(function(){var i,l,$node,selectors;selectors=['.mw-body-primary','.mw-body','#mw-content-text','body'];for(i=0,l=selectors.length;i<l;i++){$node=$(selectors[i]);if($node.length){return $node.first();}}return util.$content;}());},rawurlencode:function(str){str=String(str);return encodeURIComponent(str).replace(/!/g,'%21').replace(/'/g,'%27').replace(/\(/g,'%28').replace(/\)/g,'%29').replace(/\*/g,'%2A').replace(/~/g,'%7E');},wikiUrlencode:function(str){return util.rawurlencode(str).replace(/%20/g,'_').replace(/%3B/g,';').replace(/%40/g,'@').replace(/%24/g,'$').replace(/%21/g,'!').replace(/%2A/g,'*').replace(/%28/g,'(').replace(
/%29/g,')').replace(/%2C/g,',').replace(/%2F/g,'/').replace(/%3A/g,':');},getUrl:function(str,params){var url=mw.config.get('wgArticlePath').replace('$1',util.wikiUrlencode(typeof str==='string'?str:mw.config.get('wgPageName')));if(params&&!$.isEmptyObject(params)){url+=(url.indexOf('?')!==-1?'&':'?')+$.param(params);}return url;},wikiScript:function(str){str=str||'index';if(str==='index'){return mw.config.get('wgScript');}else if(str==='load'){return mw.config.get('wgLoadScript');}else{return mw.config.get('wgScriptPath')+'/'+str+mw.config.get('wgScriptExtension');}},addCSS:function(text){var s=mw.loader.addStyleTag(text);return s.sheet||s.styleSheet||s;},getParamValue:function(param,url){if(url===undefined){url=location.href;}var re=new RegExp('^[^#]*[&?]'+$.escapeRE(param)+'=([^&#]*)'),m=re.exec(url);if(m){return decodeURIComponent(m[1].replace(/\+/g,'%20'));}return null;},$content:null,addPortletLink:function(portlet,href,text,id,tooltip,accesskey,nextnode){var $item,$link,$portlet
,$ul;if(arguments.length<3){return null;}$link=$('<a>').attr('href',href).text(text);if(tooltip){$link.attr('title',tooltip);}$portlet=$('#'+portlet);if($portlet.length===0){return null;}$ul=$portlet.find('ul').eq(0);if($ul.length===0){$ul=$('<ul>');if($portlet.find('div:first').length===0){$portlet.append($ul);}else{$portlet.find('div').eq(-1).append($ul);}}if($ul.length===0){return null;}$portlet.removeClass('emptyPortlet');if($portlet.hasClass('vectorTabs')){$item=$link.wrap('<li><span></span></li>').parent().parent();}else{$item=$link.wrap('<li></li>').parent();}if(id){$item.attr('id',id);}if(accesskey){$link.attr('accesskey',accesskey);}if(tooltip){$link.attr('title',tooltip);}if(nextnode){if(nextnode.nodeType||typeof nextnode==='string'){nextnode=$ul.find(nextnode);}else if(!nextnode.jquery){nextnode=undefined;}if(nextnode&&(nextnode.length!==1||nextnode[0].parentNode!==$ul[0])){nextnode=undefined;}}if(nextnode){nextnode.before($item);}else{$ul.append($item);}$link.
updateTooltipAccessKeys();return $item[0];},validateEmail:function(mailtxt){var rfc5322Atext,rfc1034LdhStr,html5EmailRegexp;if(mailtxt===''){return null;}rfc5322Atext='a-z0-9!#$%&\'*+\\-/=?^_`{|}~';rfc1034LdhStr='a-z0-9\\-';html5EmailRegexp=new RegExp('^'+'['+rfc5322Atext+'\\.]+'+'@'+'['+rfc1034LdhStr+']+'+'(?:\\.['+rfc1034LdhStr+']+)*'+'$','i');return(mailtxt.match(html5EmailRegexp)!==null);},isIPv4Address:function(address,allowBlock){if(typeof address!=='string'){return false;}var block=allowBlock?'(?:\\/(?:3[0-2]|[12]?\\d))?':'',RE_IP_BYTE='(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|0?[0-9]?[0-9])',RE_IP_ADD='(?:'+RE_IP_BYTE+'\\.){3}'+RE_IP_BYTE;return address.search(new RegExp('^'+RE_IP_ADD+block+'$'))!==-1;},isIPv6Address:function(address,allowBlock){if(typeof address!=='string'){return false;}var block=allowBlock?'(?:\\/(?:12[0-8]|1[01][0-9]|[1-9]?\\d))?':'',RE_IPV6_ADD='(?:'+':(?::|(?::'+'[0-9A-Fa-f]{1,4}'+'){1,7})'+'|'+'[0-9A-Fa-f]{1,4}'+'(?::'+'[0-9A-Fa-f]{1,4}'+'){0,6}::'+'|'+
'[0-9A-Fa-f]{1,4}'+'(?::'+'[0-9A-Fa-f]{1,4}'+'){7}'+')';if(address.search(new RegExp('^'+RE_IPV6_ADD+block+'$'))!==-1){return true;}RE_IPV6_ADD='[0-9A-Fa-f]{1,4}'+'(?:::?'+'[0-9A-Fa-f]{1,4}'+'){1,6}';return address.search(new RegExp('^'+RE_IPV6_ADD+block+'$'))!==-1&&address.search(/::/)!==-1&&address.search(/::.*::/)===-1;}};mw.log.deprecate(util,'wikiGetlink',util.getUrl,'Use mw.util.getUrl instead.');mw.log.deprecate(util,'tooltipAccessKeyPrefix',$.fn.updateTooltipAccessKeys.getAccessKeyPrefix(),'Use jquery.accessKeyLabel instead.');mw.log.deprecate(util,'tooltipAccessKeyRegexp',/\[(ctrl-)?(option-)?(alt-)?(shift-)?(esc-)?(.)\]$/,'Use jquery.accessKeyLabel instead.');mw.log.deprecate(util,'updateTooltipAccessKeys',function($nodes){if(!$nodes){if(document.querySelectorAll){$nodes=$(document.querySelectorAll('[accesskey]'));}else{$nodes=$('#column-one a, #mw-head a, #mw-panel a, #p-logo a, input, label, button');}}else if(!($nodes instanceof $)){$nodes=$($nodes);}$nodes.
updateTooltipAccessKeys();},'Use jquery.accessKeyLabel instead.');mw.log.deprecate(util,'jsMessage',function(message){if(!arguments.length||message===''||message===null){return true;}if(typeof message!=='object'){message=$.parseHTML(message);}mw.notify(message,{autoHide:true,tag:'legacy'});return true;},'Use mw.notify instead.');mw.util=util;}(mediaWiki,jQuery));},{},{},{});mw.loader.implement("mediawiki.language.data",function($,jQuery){mw.language.setData("en",{"digitTransformTable":null,"separatorTransformTable":null,"grammarForms":[],"pluralRules":["i = 1 and v = 0 @integer 1"],"digitGroupingPattern":null,"fallbackLanguages":[]});},{},{},{});mw.loader.implement("mediawiki.language.init",function($,jQuery){(function(mw){mw.language={data:{},getData:function(langCode,dataKey){var langData=mw.language.data;if(langData&&langData[langCode]instanceof mw.Map){return langData[langCode].get(dataKey);}return undefined;},setData:function(langCode,dataKey,value){var langData=mw.language.data;
if(!(langData[langCode]instanceof mw.Map)){langData[langCode]=new mw.Map();}langData[langCode].set(dataKey,value);}};}(mediaWiki));},{},{},{});mw.loader.implement("mediawiki.libs.pluralruleparser",function($,jQuery){(function(mw){function pluralRuleParser(rule,number){'use strict';rule=rule.split('@')[0].replace(/^\s*/,'').replace(/\s*$/,'');if(!rule.length){return true;}var pos=0,operand,expression,relation,result,whitespace=makeRegexParser(/^\s+/),value=makeRegexParser(/^\d+/),_n_=makeStringParser('n'),_i_=makeStringParser('i'),_f_=makeStringParser('f'),_t_=makeStringParser('t'),_v_=makeStringParser('v'),_w_=makeStringParser('w'),_is_=makeStringParser('is'),_isnot_=makeStringParser('is not'),_isnot_sign_=makeStringParser('!='),_equal_=makeStringParser('='),_mod_=makeStringParser('mod'),_percent_=makeStringParser('%'),_not_=makeStringParser('not'),_in_=makeStringParser('in'),_within_=makeStringParser('within'),_range_=makeStringParser('..'),_comma_=makeStringParser(','),_or_=
makeStringParser('or'),_and_=makeStringParser('and');function debug(){}debug('pluralRuleParser',rule,number);function choice(parserSyntax){return function(){var i,result;for(i=0;i<parserSyntax.length;i++){result=parserSyntax[i]();if(result!==null){return result;}}return null;};}function sequence(parserSyntax){var i,parserRes,originalPos=pos,result=[];for(i=0;i<parserSyntax.length;i++){parserRes=parserSyntax[i]();if(parserRes===null){pos=originalPos;return null;}result.push(parserRes);}return result;}function nOrMore(n,p){return function(){var originalPos=pos,result=[],parsed=p();while(parsed!==null){result.push(parsed);parsed=p();}if(result.length<n){pos=originalPos;return null;}return result;};}function makeStringParser(s){var len=s.length;return function(){var result=null;if(rule.substr(pos,len)===s){result=s;pos+=len;}return result;};}function makeRegexParser(regex){return function(){var matches=rule.substr(pos).match(regex);if(matches===null){return null;}pos+=matches[0].length;
return matches[0];};}function i(){var result=_i_();if(result===null){debug(' -- failed i',parseInt(number,10));return result;}result=parseInt(number,10);debug(' -- passed i ',result);return result;}function n(){var result=_n_();if(result===null){debug(' -- failed n ',number);return result;}result=parseFloat(number,10);debug(' -- passed n ',result);return result;}function f(){var result=_f_();if(result===null){debug(' -- failed f ',number);return result;}result=(number+'.').split('.')[1]||0;debug(' -- passed f ',result);return result;}function t(){var result=_t_();if(result===null){debug(' -- failed t ',number);return result;}result=(number+'.').split('.')[1].replace(/0$/,'')||0;debug(' -- passed t ',result);return result;}function v(){var result=_v_();if(result===null){debug(' -- failed v ',number);return result;}result=(number+'.').split('.')[1].length||0;debug(' -- passed v ',result);return result;}function w(){var result=_w_();if(result===null){debug(' -- failed w ',number);return result
;}result=(number+'.').split('.')[1].replace(/0$/,'').length||0;debug(' -- passed w ',result);return result;}operand=choice([n,i,f,t,v,w]);expression=choice([mod,operand]);function mod(){var result=sequence([operand,whitespace,choice([_mod_,_percent_]),whitespace,value]);if(result===null){debug(' -- failed mod');return null;}debug(' -- passed '+parseInt(result[0],10)+' '+result[2]+' '+parseInt(result[4],10));return parseInt(result[0],10)%parseInt(result[4],10);}function not(){var result=sequence([whitespace,_not_]);if(result===null){debug(' -- failed not');return null;}return result[1];}function is(){var result=sequence([expression,whitespace,choice([_is_]),whitespace,value]);if(result!==null){debug(' -- passed is : '+result[0]+' == '+parseInt(result[4],10));return result[0]===parseInt(result[4],10);}debug(' -- failed is');return null;}function isnot(){var result=sequence([expression,whitespace,choice([_isnot_,_isnot_sign_]),whitespace,value]);if(result!==null){debug(
' -- passed isnot: '+result[0]+' != '+parseInt(result[4],10));return result[0]!==parseInt(result[4],10);}debug(' -- failed isnot');return null;}function not_in(){var i,range_list,result=sequence([expression,whitespace,_isnot_sign_,whitespace,rangeList]);if(result!==null){debug(' -- passed not_in: '+result[0]+' != '+result[4]);range_list=result[4];for(i=0;i<range_list.length;i++){if(parseInt(range_list[i],10)===parseInt(result[0],10)){return false;}}return true;}debug(' -- failed not_in');return null;}function rangeList(){var result=sequence([choice([range,value]),nOrMore(0,rangeTail)]),resultList=[];if(result!==null){resultList=resultList.concat(result[0]);if(result[1][0]){resultList=resultList.concat(result[1][0]);}return resultList;}debug(' -- failed rangeList');return null;}function rangeTail(){var result=sequence([_comma_,rangeList]);if(result!==null){return result[1];}debug(' -- failed rangeTail');return null;}function range(){var i,array,left,right,result=sequence([value,_range_,
value]);if(result!==null){debug(' -- passed range');array=[];left=parseInt(result[0],10);right=parseInt(result[2],10);for(i=left;i<=right;i++){array.push(i);}return array;}debug(' -- failed range');return null;}function _in(){var result,range_list,i;result=sequence([expression,nOrMore(0,not),whitespace,choice([_in_,_equal_]),whitespace,rangeList]);if(result!==null){debug(' -- passed _in:'+result);range_list=result[5];for(i=0;i<range_list.length;i++){if(parseInt(range_list[i],10)===parseInt(result[0],10)){return(result[1][0]!=='not');}}return(result[1][0]==='not');}debug(' -- failed _in ');return null;}function within(){var range_list,result;result=sequence([expression,nOrMore(0,not),whitespace,_within_,whitespace,rangeList]);if(result!==null){debug(' -- passed within');range_list=result[5];if((result[0]>=parseInt(range_list[0],10))&&(result[0]<parseInt(range_list[range_list.length-1],10))){return(result[1][0]!=='not');}return(result[1][0]==='not');}debug(' -- failed within ');return null
;}relation=choice([is,not_in,isnot,_in,within]);function and(){var i,result=sequence([relation,nOrMore(0,andTail)]);if(result){if(!result[0]){return false;}for(i=0;i<result[1].length;i++){if(!result[1][i]){return false;}}return true;}debug(' -- failed and');return null;}function andTail(){var result=sequence([whitespace,_and_,whitespace,relation]);if(result!==null){debug(' -- passed andTail'+result);return result[3];}debug(' -- failed andTail');return null;}function orTail(){var result=sequence([whitespace,_or_,whitespace,and]);if(result!==null){debug(' -- passed orTail: '+result[3]);return result[3];}debug(' -- failed orTail');return null;}function condition(){var i,result=sequence([and,nOrMore(0,orTail)]);if(result){for(i=0;i<result[1].length;i++){if(result[1][i]){return true;}}return result[0];}return false;}result=condition();if(result===null){throw new Error('Parse error at position '+pos.toString()+' for rule: '+rule);}if(pos!==rule.length){debug(
'Warning: Rule not parsed completely. Parser stopped at '+rule.substr(0,pos)+' for rule: '+rule);}return result;}mw.libs.pluralRuleParser=pluralRuleParser;})(mediaWiki);},{},{},{});mw.loader.implement("mediawiki.page.startup",function($,jQuery){(function(mw,$){mw.page={};$('html').addClass('client-js').removeClass('client-nojs');$(function(){mw.util.init();mw.hook('wikipage.content').fire($('#mw-content-text'));});}(mediaWiki,jQuery));},{},{},{});mw.loader.implement("mobile.head",function($,jQuery){(function($){mw.mobileFrontend=$.extend({getMode:function(){return mw.config.get('wgMFMode');},isAlphaGroupMember:function(){return this.getMode()==='alpha';},isBetaGroupMember:function(){return this.getMode()==='beta'||this.isAlphaGroupMember();},assertMode:function(modes){var mode=this.getMode();if($.inArray(mode,modes)===-1){throw new Error('Attempt to run module outside declared environment mode '+mode);}}},mw.mantle);}(jQuery));(function(M,$){var browser;function memoize(method){var
memoized=function(){var cache=this['__cache'+memoized.cacheId]||(this['__cache'+memoized.cacheId]={}),key=[].join.call(arguments,'|');if(cache.hasOwnProperty(key)){return cache[key];}return(cache[key]=method.apply(this,arguments));};memoized.cacheId=Date.now().toString()+Math.random().toString();return memoized;}function Browser(ua,$container){this.userAgent=ua;this.$el=$container;if(this.isAndroid2()){this.lockViewport();}this._fixIosLandscapeBug();}Browser.prototype={_fixIosLandscapeBug:function(){var self=this,viewport=this.$el.find('meta[name="viewport"]')[0];if(viewport&&(this.isIos(4)||this.isIos(5))){this.lockViewport();document.addEventListener('gesturestart',function(){self.lockViewport();},false);}},isIos:memoize(function(version){var ua=this.userAgent,ios=/ipad|iphone|ipod/i.test(ua);if(ios&&version){switch(version){case 8:return/OS 8_/.test(ua)||/Version\/8/.test(ua);case 4:return/OS 4_/.test(ua);case 5:return/OS 5_/.test(ua);default:return false;}}else{return ios;}}),
lockViewport:function(){if(this.$el){this.$el.find('meta[name="viewport"]').attr('content','initial-scale=1.0, maximum-scale=1.0, user-scalable=no');}},isAndroid2:memoize(function(){return/Android 2/.test(this.userAgent);}),isWideScreen:function(){var val=mw.config.get('wgMFDeviceWidthTablet');return window.innerWidth>=val||window.innerHeight>=val;},supportsAnimations:memoize(function(){var has3d,t,el=$('<p>')[0],$iframe=$('<iframe>'),transforms={webkitTransform:'-webkit-transform',transform:'transform'};if(this.isAndroid2()){return false;}$iframe.appendTo('body').contents().find('body').append(el);for(t in transforms){if(el.style[t]!==undefined){el.style[t]='translate3d(1px,1px,1px)';has3d=window.getComputedStyle(el).getPropertyValue(transforms[t]);}}$iframe.remove();return has3d!==undefined&&has3d.length>0&&has3d!=='none';}),supportsPositionFixed:memoize(function(){var support=false,userAgent=this.userAgent;$.each([/AppleWebKit\/(53[4-9]|5[4-9]\d|[6-9]\d\d|\d{4,})/,/Android [2-9]/,
/Firefox/,/Trident\/[6-9]|Trident\/1\d[\d\.]+/],function(index,item){if(item.test(userAgent)){support=true;}});return support;}),supportsTouchEvents:memoize(function(){return'ontouchstart'in window;}),supportsGeoLocation:memoize(function(){return'geolocation'in navigator;}),supportsLocalStorage:memoize(function(){try{localStorage.setItem('localStorageTest','localStorageTest');localStorage.removeItem('localStorageTest');return true;}catch(e){return false;}}),supportsFileUploads:memoize(function(){var browserSupported;if(this._fileUploads!==undefined){return this._fileUploads;}if(this.userAgent.match(/Windows Phone (OS 7|8.0)/)){this._fileUploads=false;}else{browserSupported=(typeof FileReader!=='undefined'&&typeof FormData!=='undefined'&&($('<input type="file"/>').prop('type')==='file'));this._fileUploads=browserSupported&&!mw.config.get('wgImagesDisabled',false);}return this._fileUploads;})};browser=new Browser(window.navigator.userAgent,$('html'));M.define('Browser',Browser);M.define(
'browser',browser);}(mw.mobileFrontend,jQuery));(function(M,$){var browser=M.require('browser');function isOpen(){return $('body').hasClass('navigation-enabled');}function closeNavigationDrawers(){$('body').removeClass('navigation-enabled').removeClass('secondary-navigation-enabled').removeClass('primary-navigation-enabled');}function openNavigationDrawer(drawerType){closeNavigationDrawers();drawerType=drawerType||'primary';$('body').toggleClass('navigation-enabled').toggleClass(drawerType+'-navigation-enabled');}function initialize(){$('#mw-mf-main-menu-button').on('click',function(ev){if(isOpen()){closeNavigationDrawers();}else{openNavigationDrawer();}ev.preventDefault();});$('#mw-mf-page-center').on('click',function(ev){if(ev.target.id!=='mw-mf-main-menu-button'&&isOpen()){closeNavigationDrawers();ev.preventDefault();}});$('<div class="transparent-shield cloaked-element">').appendTo('#mw-mf-page-center');if(!browser.supportsGeoLocation()){$('#mw-mf-page-left .nearby').parent().
remove();}}M.define('mainmenu',{openNavigationDrawer:openNavigationDrawer,closeNavigationDrawers:closeNavigationDrawers});M.on('header-loaded',initialize);}(mw.mobileFrontend,jQuery));(function(M,$){var units=['seconds','minutes','hours','days','months','years'],limits=[1,60,3600,86400,2592000,31536000];function timeAgo(timestampDelta){var i=0;while(i<limits.length&&timestampDelta>limits[i+1]){++i;}return{value:Math.round(timestampDelta/limits[i]),unit:units[i]};}function getTimeAgoDelta(timestamp){var currentTimestamp=Math.round(new Date().getTime()/1000);return timeAgo(currentTimestamp-timestamp);}function isRecent(delta){var u=delta.unit;return $.inArray(u,['seconds','minutes','hours'])>-1;}function isNow(delta){return delta.unit==='seconds'&&delta.value<10;}M.define('modules/lastEdited/time',{timeAgo:timeAgo,getTimeAgoDelta:getTimeAgoDelta,isNow:isNow,isRecent:isRecent});}(mw.mobileFrontend,jQuery));(function(M,$){var time=M.require('modules/lastEdited/time');function init(){var
$lastModified=$('#mw-mf-last-modified'),historyUrl=$lastModified.attr('href'),ts=$lastModified.data('timestamp'),username=$lastModified.data('user-name')||false,gender=$lastModified.data('user-gender'),keys={seconds:'mobile-frontend-last-modified-with-user-seconds',minutes:'mobile-frontend-last-modified-with-user-minutes',hours:'mobile-frontend-last-modified-with-user-hours',days:'mobile-frontend-last-modified-with-user-days',months:'mobile-frontend-last-modified-with-user-months',years:'mobile-frontend-last-modified-with-user-years'},delta,args=[];if(ts){delta=time.getTimeAgoDelta(parseInt(ts,10));if(time.isNow(delta)){args=args.concat(['mobile-frontend-last-modified-with-user-just-now',gender,username]);}else{args=args.concat([keys[delta.unit],gender,username,mw.language.convertNumber(delta.value)]);}if(time.isRecent(delta)){$lastModified.addClass('active');}args=args.concat([historyUrl,mw.language.convertNumber(username?1:0),username?mw.util.getUrl('Special:UserProfile/'+username):
'']);$('<div>').attr('id','mw-mf-last-modified').attr('class',$lastModified.attr('class')).html(mw.message.apply(this,args).parse()).insertBefore($lastModified);$lastModified.remove();}}M.on('history-link-loaded',init);}(mw.mobileFrontend,jQuery));},{},{"mobile-frontend-last-modified-with-user-days":"[$4 Last {{GENDER:$1|edited}} {{PLURAL:$3|$3 day|$3 days}} ago] by {{PLURAL:$5|[$6 $2]|0=an anonymous user}}","mobile-frontend-last-modified-with-user-hours":"[$4 Last {{GENDER:$1|edited}} {{PLURAL:$3|$3 hour|$3 hours}} ago] by {{PLURAL:$5|[$6 $2]|0=an anonymous user}}","mobile-frontend-last-modified-with-user-just-now":"[$3 Last {{GENDER:$1|edited}}] just now by {{PLURAL:$4|[$5 $2]|0=an anonymous user}}","mobile-frontend-last-modified-with-user-minutes":"[$4 Last {{GENDER:$1|edited}} {{PLURAL:$3|$3 minute|$3 minutes}} ago] by {{PLURAL:$5|[$6 $2]|0=an anonymous user}}","mobile-frontend-last-modified-with-user-months":
"[$4 Last {{GENDER:$1|edited}} {{PLURAL:$3|$3 month|$3 months}} ago] by {{PLURAL:$5|[$6 $2]|0=an anonymous user}}","mobile-frontend-last-modified-with-user-seconds":"[$4 Last {{GENDER:$1|edited}} {{PLURAL:$3|$3 second|$3 seconds}} ago] by {{PLURAL:$5|[$6 $2]|0=an anonymous user}}","mobile-frontend-last-modified-with-user-years":"[$4 Last {{GENDER:$1|edited}} {{PLURAL:$3|$3 year|$3 years}} ago] by {{PLURAL:$5|[$6 $2]|0=an anonymous user}}"},{});mw.loader.implement("mobile.templates",function($,jQuery){(function($){$.extend(mw.mobileFrontend,{template:mw.mantle.template});}(jQuery));},{},{},{});mw.loader.implement("oojs",function($,jQuery){(function(global){'use strict';var oo={},hasOwn=oo.hasOwnProperty,toString=oo.toString;oo.initClass=function(fn){fn.static=fn.static||{};};oo.inheritClass=function(targetFn,originFn){if(targetFn.prototype instanceof originFn){throw new Error('Target already inherits from origin');}var targetConstructor=targetFn.prototype.constructor;targetFn['super']=
targetFn.parent=originFn;targetFn.prototype=Object.create(originFn.prototype,{constructor:{value:targetConstructor,enumerable:false,writable:true,configurable:true}});oo.initClass(originFn);targetFn.static=Object.create(originFn.static);};oo.mixinClass=function(targetFn,originFn){var key;for(key in originFn.prototype){if(key!=='constructor'&&hasOwn.call(originFn.prototype,key)){targetFn.prototype[key]=originFn.prototype[key];}}oo.initClass(targetFn);if(originFn.static){for(key in originFn.static){if(hasOwn.call(originFn.static,key)){targetFn.static[key]=originFn.static[key];}}}else{oo.initClass(originFn);}};oo.getProp=function(obj){var i,retval=obj;for(i=1;i<arguments.length;i++){if(retval===undefined||retval===null){return undefined;}retval=retval[arguments[i]];}return retval;};oo.setProp=function(obj){var i,prop=obj;if(Object(obj)!==obj){return;}for(i=1;i<arguments.length-2;i++){if(prop[arguments[i]]===undefined){prop[arguments[i]]={};}if(Object(prop[arguments[i]])!==prop[arguments[i
]]){return;}prop=prop[arguments[i]];}prop[arguments[arguments.length-2]]=arguments[arguments.length-1];};oo.cloneObject=function(origin){var key,r;r=Object.create(origin.constructor.prototype);for(key in origin){if(hasOwn.call(origin,key)){r[key]=origin[key];}}return r;};oo.getObjectValues=function(obj){var key,values;if(obj!==Object(obj)){throw new TypeError('Called on non-object');}values=[];for(key in obj){if(hasOwn.call(obj,key)){values[values.length]=obj[key];}}return values;};oo.compare=function(a,b,asymmetrical){var aValue,bValue,aType,bType,k;if(a===b){return true;}a=a||{};b=b||{};for(k in a){if(!hasOwn.call(a,k)||a[k]===undefined){continue;}aValue=a[k];bValue=b[k];aType=typeof aValue;bType=typeof bValue;if(aType!==bType||((aType==='string'||aType==='number'||aType==='boolean')&&aValue!==bValue)||(aValue===Object(aValue)&&!oo.compare(aValue,bValue,asymmetrical))){return false;}}return asymmetrical?true:oo.compare(b,a,true);};oo.copy=function(source,leafCallback,nodeCallback){
var key,destination;if(nodeCallback){destination=nodeCallback(source);if(destination!==undefined){return destination;}}if(Array.isArray(source)){destination=new Array(source.length);}else if(source&&typeof source.clone==='function'){return leafCallback?leafCallback(source.clone()):source.clone();}else if(source&&typeof source.cloneNode==='function'){return leafCallback?leafCallback(source.cloneNode(true)):source.cloneNode(true);}else if(oo.isPlainObject(source)){destination={};}else{return leafCallback?leafCallback(source):source;}for(key in source){destination[key]=oo.copy(source[key],leafCallback,nodeCallback);}return destination;};oo.getHash=function(val){return JSON.stringify(val,oo.getHash.keySortReplacer);};oo.getHash.keySortReplacer=function(key,val){var normalized,keys,i,len;if(val&&typeof val.getHashObject==='function'){val=val.getHashObject();}if(!Array.isArray(val)&&Object(val)===val){normalized={};keys=Object.keys(val).sort();i=0;len=keys.length;for(;i<len;i+=1){normalized[
keys[i]]=val[keys[i]];}return normalized;}else{return val;}};oo.simpleArrayUnion=function(){var i,ilen,arr,j,jlen,obj={},result=[];for(i=0,ilen=arguments.length;i<ilen;i++){arr=arguments[i];for(j=0,jlen=arr.length;j<jlen;j++){if(!obj[arr[j]]){obj[arr[j]]=true;result.push(arr[j]);}}}return result;};function simpleArrayCombine(a,b,includeB){var i,ilen,isInB,bObj={},result=[];for(i=0,ilen=b.length;i<ilen;i++){bObj[b[i]]=true;}for(i=0,ilen=a.length;i<ilen;i++){isInB=!!bObj[a[i]];if(isInB===includeB){result.push(a[i]);}}return result;}oo.simpleArrayIntersection=function(a,b){return simpleArrayCombine(a,b,true);};oo.simpleArrayDifference=function(a,b){return simpleArrayCombine(a,b,false);};oo.isPlainObject=$.isPlainObject;(function(){oo.EventEmitter=function OoEventEmitter(){this.bindings={};};oo.initClass(oo.EventEmitter);function validateMethod(method,context){if(typeof method==='string'){if(context===undefined||context===null){throw new Error('Method name "'+method+'" has no context.');}
if(typeof context[method]!=='function'){throw new Error('Property "'+method+'" is not a function');}}else if(typeof method!=='function'){throw new Error('Invalid callback. Function or method name expected.');}}oo.EventEmitter.prototype.on=function(event,method,args,context){var bindings;validateMethod(method,context);if(hasOwn.call(this.bindings,event)){bindings=this.bindings[event];}else{bindings=this.bindings[event]=[];}bindings.push({method:method,args:args,context:(arguments.length<4)?null:context});return this;};oo.EventEmitter.prototype.once=function(event,listener){var eventEmitter=this,listenerWrapper=function(){eventEmitter.off(event,listenerWrapper);listener.apply(eventEmitter,Array.prototype.slice.call(arguments,0));};return this.on(event,listenerWrapper);};oo.EventEmitter.prototype.off=function(event,method,context){var i,bindings;if(arguments.length===1){delete this.bindings[event];return this;}validateMethod(method,context);if(!hasOwn.call(this.bindings,event)||!this.
bindings[event].length){return this;}if(arguments.length<3){context=null;}bindings=this.bindings[event];i=bindings.length;while(i--){if(bindings[i].method===method&&bindings[i].context===context){bindings.splice(i,1);}}if(bindings.length===0){delete this.bindings[event];}return this;};oo.EventEmitter.prototype.emit=function(event){var i,len,binding,bindings,args,method;if(hasOwn.call(this.bindings,event)){bindings=this.bindings[event].slice();args=Array.prototype.slice.call(arguments,1);for(i=0,len=bindings.length;i<len;i++){binding=bindings[i];if(typeof binding.method==='string'){method=binding.context[binding.method];}else{method=binding.method;}method.apply(binding.context,binding.args?binding.args.concat(args):args);}return true;}return false;};oo.EventEmitter.prototype.connect=function(context,methods){var method,args,event;for(event in methods){method=methods[event];if(Array.isArray(method)){args=method.slice(1);method=method[0];}else{args=[];}this.on(event,method,args,context);}
return this;};oo.EventEmitter.prototype.disconnect=function(context,methods){var i,event,bindings;if(methods){for(event in methods){this.off(event,methods[event],context);}}else{for(event in this.bindings){bindings=this.bindings[event];i=bindings.length;while(i--){if(bindings[i]&&bindings[i].context===context){this.off(event,bindings[i].method,context);}}}}return this;};}());oo.Registry=function OoRegistry(){oo.EventEmitter.call(this);this.registry={};};oo.mixinClass(oo.Registry,oo.EventEmitter);oo.Registry.prototype.register=function(name,data){var i,len;if(typeof name==='string'){this.registry[name]=data;this.emit('register',name,data);}else if(Array.isArray(name)){for(i=0,len=name.length;i<len;i++){this.register(name[i],data);}}else{throw new Error('Name must be a string or array, cannot be a '+typeof name);}};oo.Registry.prototype.lookup=function(name){if(hasOwn.call(this.registry,name)){return this.registry[name];}};oo.Factory=function OoFactory(){oo.Factory.parent.call(this);this
.entries=[];};oo.inheritClass(oo.Factory,oo.Registry);oo.Factory.prototype.register=function(constructor){var name;if(typeof constructor!=='function'){throw new Error('constructor must be a function, cannot be a '+typeof constructor);}name=constructor.static&&constructor.static.name;if(typeof name!=='string'||name===''){throw new Error('Name must be a string and must not be empty');}this.entries.push(name);oo.Factory.parent.prototype.register.call(this,name,constructor);};oo.Factory.prototype.create=function(name){var args,obj,constructor=this.lookup(name);if(!constructor){throw new Error('No class registered by that name: '+name);}args=Array.prototype.slice.call(arguments,1);obj=Object.create(constructor.prototype);constructor.apply(obj,args);return obj;};if(typeof module!=='undefined'&&module.exports){module.exports=oo;}else{global.OO=oo;}}(this));},{},{},{});
/* cache key: enwiki:resourceloader:filter:minify-js:7:362b1653ea607cf49f2ffc07f3c9e48c */